function plog(n){logging&&console.log(n)}function createSharex(){$("[data-role=sharex]").each(function(){var n=$(this);fixedUrls(n);n=null})}function fixedUrls(n){var u,f,t;u=typeof Liferay=="undefined"?"http://www.uce.edu.ec/home":Liferay.ThemeDisplay.getLayoutURL();var r=u.match(reg)[0]+($("#calendar").data("func")=="boletin"?"archive_boletines?month=":$("#calendar").data("func")=="etica"?"noticias_ce?month=":$("#calendar").data("func")=="nucleo"?"noticias_nucleoinvestigadores?month=":"archive_noticias?month="),e='<i class="fa fa-share-alt"><\/i>',o="https://twitter.com/intent/tweet?text=%E2%80%9C",s="%E2%80%9D&url=",h="&via=lacentralec",c="http://www.facebook.com/sharer.php?u=",i=n.data("sharex-service");if(typeof i=="undefined"&&(i="u"),i=="f")f=encodeURI(r+n.data("sharex-artid")),t=c+f,n.attr("href",t);else if(i=="t"){var f=encodeURI(r+n.data("sharex-artid")),l=encodeURI(n.data("sharex-title")),t=o+l+s+f+h;n.attr("href",t)}else i=="l"?(t=r+n.data("sharex-artid"),n.attr("href",t),n.html(e+" "+t)):(t=r+n.data("sharex-artid"),n.attr("href",t));r=e=o=s=h=c=i=u=n=null}function goToByScroll(n){var t=$("html,body"),i=$('.slide[data-slide="'+n+'"]').offset().top-45;t.animate({scrollTop:i},2500,"easeInOutBack");i=t=null}function innerNavigate(){var n=$("a.toSlide"),t=$(".scrollbut");n.length>0&&(n.click(function(n){n.preventDefault();$("#dcmmenu").trigger("close.mm");var t=$(this).attr("data-slide");return goToByScroll(t),!1}),n=null,t.click(function(n){n.preventDefault();var t=$(this).attr("data-slide");goToByScroll(t);t=null}),t=null)}function initLazyLoad(){$(function(n){n("img.lazy").Lazy({threshold:300}).removeClass("lazy")})}function initRadio(){$.getScript(cdnUrl+"js/libs/radio.js",function(){plog("radio.js run")})}function initSlick(){$(".topBanner").slick({centerMode:!1,slidesToScroll:1,centerPadding:"40px",slidesToShow:1,autoplay:!debug,autoplaySpeed:5e3,prevArrow:'<button type="button" class="slick-prev hidden">Previous<\/button>',nextArrow:'<button type="button" class="slick-prev hidden">Previous<\/button>',speed:500})}function initx(){var t=$("[data-load]"),n=t.length;t.each(function(){var i=$(this),t=i.data("load");plog("load start:"+t);$.ajax({type:"get",crossDomain:!0,url:t,contentType:"text/plain",success:function(r,u,f){if(i.html(r),n=n-1,plog("load finish:"+t+";  -->"+f.status+" "+f.statusText+" len:"+n),n==0){plog("loads terminados");plog("mm-menu creando: body:"+$("body").length);$("#mm-nav-content").appendTo("#dcmmenu");$("#dcmmenu").mmenu({classes:"mm-slide"});plog("mm-menu creado body:"+$("body").length);$("#loader").addClass("animated bounceOutUp");setTimeout(function(){if(plog("removiendo loader"),$("#loader").remove(),$("#loaderStyle").remove(),plog("iniciando innerNavigate"),innerNavigate(),plog("fin  innerNavigate"),$("body").animate({scrollTop:1},1),window.location.search.indexOf("page=")>-1){var n=$('.slide[data-slide="'+noti_slide_num+'"]').offset().top;$("body").animate({scrollTop:n},1e3,"easeInOutBack")}},1300);plog("iniciando onloadX");DockPopUp().init();var e=new Date,o=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"][e.getDay()]+" "+e.toLocaleDateString("ec");$("#dcm-date").text(o);$.Metro.initAll($("body.metro"));onloadX();initSlick();initLazyLoad();plog("fin onloadX");initRadio()}},error:function(i,r,u){n=n-1;plog("error load finish:"+t+";  -->"+i.status+" "+i.statusText+" : "+u+" len:"+n)}})})}var isLocalHost=!1,logging=!1,cdnUrl="//aka-cdn.uce.edu.ec/ares/perseo/common/",reg=/.*\/.*\//g,Liferay,DockPopUp,yearGrid;$(window).scroll(function(){var n=window.pageYOffset,t=50;n>t?jQuery(".top").fadeIn(1e3):jQuery(".top").fadeOut(500);n=t=null});jQuery(".top").click(function(){jQuery("html, body").animate({scrollTop:0},1e3,"easeOutCubic")});jQuery.support.cors=!0;typeof Liferay=="undefined"&&window.location.href.indexOf("public_html")>-1&&(isLocalHost=!0,cdnUrl="/public_html/perseo/common/",plog("mode HTML: on"),Liferay={ThemeDisplay:{getLayoutId:function(){return"1"},getLayoutURL:function(){return"http://www.uce.edu.ec/ajax/home"},getPortalURL:function(){return"http://www.uce.edu.ec"}},on:function(){}});$(window).load(function(){plog("window on load eventx body:"+$("body").length);initx();createSharex()});DockPopUp=function(){function l(){v()}function v(){o.each(function(f){var o=$(this),l=o.find("span.rb-close"),h=o.find("div.rb-overlay");o.data("index",f);o.on("click",function(){var f;if(o.addClass("no-anim"),o.data("ajaxLoad")||(f=$(o.find(".ajax-content")),$.ajax({type:"get",url:Liferay.ThemeDisplay.getLayoutURL().match(a)[0]+"ajax?artID="+f.data("ajax-artid")+"&groupID="+f.data("ajax-groupid"),success:function(n){var t=$("#ajax-dcm",n);f.append(t.html());t=n=null;o.data("ajaxLoad",!0);$.Metro.initPanels(o);switch(f.data("func")){case"years":yearGrid().init();$.Metro.initPdfStack(f);break;case"biblio":plog("biblio cargada con exito 4");$.Metro.initDropdowns(o);$.Metro.initPulls(o);$.Metro.initSidebars(o);$.Metro.initPagination(o);c(o);e(o);plog("biblio cargada eventos");initSlick()}},error:function(){o.data("ajaxLoad",!0);switch(f.data("func")){case"years":yearGrid().init();$.Metro.initPdfStack(f);break;case"biblio":$.Metro.initSidebars(o);$.Metro.initPagination(o);c(o);e(o)}}})),o.data("isExpanded"))return!0;o.data("isExpanded",!0);r=o.data("index");var l=s(o),y="rect("+l.top+"px "+(l.left+l.width)+"px "+(l.top+l.height)+"px "+l.left+"px)",v="rect(0px "+u.width+"px "+u.height+"px 0px)";if(h.css({transformOrigin:l.left+"px "+l.top+"px",clip:t?y:v,transform:t?"rotate(45deg)":"none",opacity:1,zIndex:9999,pointerEvents:"auto"}),t)h.on(n,function(){h.off(n);setTimeout(function(){h.css({clip:v,transform:"rotate(0deg)"}).on(n,function(){h.off(n);i.css("overflow-y","hidden")})},25)});else i.css("overflow-y","hidden");if(o.data("ajaxLoad")){f=$(o.find(".ajax-content"));switch(f.data("func")){case"biblio":e(f);$.Metro.initDropdowns(o);$.Metro.initPulls(o)}}});l.on("click",function(){i.css("overflow-y","auto");var u=s(o),e="rect("+u.top+"px "+(u.left+u.width)+"px "+(u.top+u.height)+"px "+u.left+"px)",f="auto";if(r=-1,h.css({clip:t?e:f,opacity:t?1:0,pointerEvents:"none"}),t)h.on(n,function(){h.off(n);setTimeout(function(){h.css("opacity",0).on(n,function(){h.off(n).css({clip:f,zIndex:-1});o.data("isExpanded",!1);o.removeClass("no-anim")})},25)});else h.css("z-index",-1),o.data("isExpanded",!1);return!1})});$(window).on("debouncedresize",function(){u=h();r!==-1&&$(o.eq(r).find("div.rb-overlay")).css("clip","rect(0px "+u.width+"px "+u.height+"px 0px)")})}function s(n){var i=f.scrollTop(),r=f.scrollLeft(),t=n.offset();return{left:t.left-r,top:t.top-i,width:n.outerWidth(),height:n.outerHeight()}}function h(){i.css("overflow-y","hidden");var n=f.width(),t=f.height();return r===-1&&i.css("overflow-y","auto"),{width:n,height:t}}function e(n){var t=n.find("[data-role=sidebar]"),i=$(t.children("nav")).find("a"),u=$(t.children(".full-content")),f=u.children(".slic"),r;i.each(function(){$(this).parent().removeClass("active")});f.hide();$(f.get(0)).show();$(i.get(1)).parent().addClass("active");r=$(i.get(1)).css("background-color");t.css("background-color",r);u.css("background-color",r);t=u=i=r=null}function c(n){var t=n.find(".noticiasWrap"),i=t.find(".noti-viewer"),r=t.find(".noti-item"),u=n.find(".eventosWrap"),f=u.find(".item-evento");t.find("[data-role=sharex]").each(function(){var n=$(this);fixedUrls(n);n=null});r.each(function(){var n=$(this);n.click(function(){var n=$(this);i.fadeOut(function(){i.html(n.find(".oculto").html()).fadeIn();n=null})});n=null});i.html($(r.get(0)).find(".oculto").html());f.each(function(){var n=$(this),t=n.find("a.fg-yellow"),i=$(t.get(0)),r=$(t.get(1));i.click(function(){var t=n.find(".event-desc");return n.data("opened",!0),n.addClass("active"),t.slideToggle(),t=null,!1});r.click(function(){var t=n.find(".event-desc");return n.data("opened",!1),t.slideToggle(function(){n.removeClass("active")}),t=null,!1});i=r=null});r=u=f=t=null}var o=$(".dock-popup"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")],f=$(window),i=$("BODY"),t=Modernizr.csstransitions,r=-1,u=h(),a=/.*\/.*\//g;return{init:l}};yearGrid=function(){function u(n){settings=$.extend(!0,{},settings,n);i(!0);t();f()}function i(n){$items.each(function(){var t=$(this);t.data("offsetTop",t.offset().top);n&&t.data("height",t.height())})}function f(){e($items);$window.on("debouncedresize",function(){scrollExtra=0;previewPos=-1;i();t();var r=$.data(this,"preview");typeof r!="undefined"&&n()})}function e(t){t.on("click","span.og-close",function(){return n(),!1}).children("a").on("click",function(){var t=$(this).parent();return current===t.index()?n():o(t),!1})}function t(){winsize={width:$window.width(),height:$window.height()}}function o(t){var i=$.data(this,"preview"),u=t.data("offsetTop");if(scrollExtra=0,typeof i!="undefined")if(previewPos!==u)u>previewPos&&(scrollExtra=i.height),n();else return i.update(t),!1;previewPos=u;i=$.data(this,"preview",new r(t))}function n(){current=-1;var n=$.data(this,"preview");n.close();$.removeData(this,"preview")}function r(n){this.$item=n;this.expandedIdx=this.$item.index();this.create();this.update()}return $items=$(".ley .yearsx > li"),current=-1,previewPos=-1,scrollExtra=0,marginExpanded=10,$window=$(window),winsize=t(),$body=$(".full-content.ley"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},transEndEventName=transEndEventNames[Modernizr.prefixed("transition")],support=Modernizr.csstransitions,settings={minHeight:500,speed:350,easing:"ease",showVisitButton:!0},r.prototype={create:function(){this.$previewEl=this.$item.find(".og-expander");support&&this.setTransition()},update:function(n){n&&(this.$item=n);var t=current,i=this.$previewEl;current=this.$item.index();this.expandedIdx=current;this.$previewEl=this.$item.find(".og-expander");support&&this.setTransition();this.open();setTimeout($.proxy(function(){if(t!==-1){var n=$items.eq(t);n.removeClass("og-expanded");i.css("height",0);n.css("height",n.data("height"));i=null}},this),150)},open:function(){setTimeout($.proxy(function(){this.setHeights();this.positionPreview()},this),25)},close:function(){var t=this,n=function(){support&&$(this).off(transEndEventName);t.$item.removeClass("og-expanded")};return setTimeout($.proxy(function(){this.$previewEl.css("height",0);var t=$items.eq(this.expandedIdx);t.css("height",t.data("height")).on(transEndEventName,n);support||n.call()},this),25),!1},calcHeight:function(){var n=winsize.height-this.$item.data("height")-marginExpanded,t=winsize.height;n<settings.minHeight&&(n=settings.minHeight,t=settings.minHeight+this.$item.data("height")+marginExpanded);this.height=n;this.itemHeight=t},setHeights:function(){var n=this,t=function(){support&&n.$item.off(transEndEventName);n.$item.addClass("og-expanded")};this.calcHeight();this.$previewEl.css("height",this.height);this.$item.css("height",this.itemHeight).on(transEndEventName,t);support||t.call()},positionPreview:function(){var n=this.$item.data("offsetTop"),i=this.$previewEl.offset().top-scrollExtra,t=n-60;$body.animate({scrollTop:t},settings.speed)},setTransition:function(){this.$previewEl.css("transition","height "+settings.speed+"ms "+settings.easing);this.$item.css("transition","height "+settings.speed+"ms "+settings.easing)},getEl:function(){return this.$previewEl}},{init:u}};$(function(){setTimeout(function(){},400)});plog("fin dcm_common, body: "+$("body").length);
//# sourceMappingURL=common.min.js.map
